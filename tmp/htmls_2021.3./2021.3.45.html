<h3 id="known-issues-in-2021345f1">Known Issues in 2021.3.45f1</h3><ul><li><p>Android:  Player crashes with an error "Unable to instantiate fragment com.unity3d.player.a.c:" when minimizing and maximizing the player while a notification permission dialog is shown
  (<a href="https://issuetracker.unity3d.com/issues/android-player-crashes-with-an-error-unable-to-instantiate-fragment-com-dot-unity3d-dot-player-dot-a-c-when-minimizing-and-maximizing-the-player-while-a-notification-permission-dialog-is-shown-and-dont-keep-activities-is-enabled-in-the-device-settings">UUM-60989</a>)</p></li><li><p>Asset - Database: Crash on GetAssetCachedInfoV2 when opening a project
  (<a href="https://issuetracker.unity3d.com/issues/crash-on-getassetcachedinfov2-when-opening-a-project">UUM-14959</a>)</p></li><li><p>IAP: [Android] Build fails with Error "A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable" when using In-App Purchasing and Facebook SDK
  (<a href="https://issuetracker.unity3d.com/issues/android-build-fails-when-using-in-app-purchasing-and-facebook-sdk">UUM-76723</a>)</p></li><li><p>Input: Crash on InputDeviceIOCTL when closing Unity editor
  (<a href="https://issuetracker.unity3d.com/issues/crash-on-inputdeviceioctl-when-closing-unity-editor">UUM-10774</a>)</p></li><li><p>iOS: iOS Simulator SDK is missing ARM64 Architecture support
  (<a href="https://issuetracker.unity3d.com/issues/ios-simulator-sdk-is-missing-arm64-architecture-support">UUM-2238</a>)</p></li><li><p>Shader System: Shader cache is not used when building the Player repeatedly
  (<a href="https://issuetracker.unity3d.com/issues/shader-cache-is-not-used-when-building-the-player-repeatedly">UUM-75264</a>)</p></li><li><p>Vulkan: [Android] Particles not rendered in the Player on some Android devices with Android 14
  (<a href="https://issuetracker.unity3d.com/issues/android-particles-not-rendered-in-the-player-on-some-android-devices-with-android-14">UUM-68080</a>)</p></li></ul><h3 id="2021345f1-release-notes">2021.3.45f1 Release Notes</h3><h4 id="improvements">Improvements</h4><ul><li><p>IL2CPP: [RequireDerived] and [RequireImplementors] will now mark all instance constructors of all types that they cause to be marked.</p></li><li><p>Shaders: Improved shader compilation logging in the player.
  (<a href="https://issuetracker.unity3d.com/issues/log-shader-compilation-does-not-give-info-on-which-shader-instance-had-a-variant-compiled">UUM-79781</a>)</p></li></ul><h4 id="api-changes">API Changes</h4><ul><li>iOS: Added: Added iPhone 16 device generation enums and screen cutouts.</li></ul><h4 id="changes">Changes</h4><ul><li><p>Editor: Updated com.unity.openxr package version to 1.13.0.</p></li><li><p>Editor: Updated OpenXR to 1.12.1.</p></li><li><p>iOS: When using "wide" color (P3 color space) we now use f16 color format for both metal layer, and internally by default.</p></li><li><p>XR: Updated XR Management Package's default version to 4.5.0.</p></li></ul><h4 id="fixes">Fixes</h4><ul><li><p>Android: Fixed unexpected permissions when using .androidlibs.
  (<a href="https://issuetracker.unity3d.com/issues/android-with-the-latest-unity-6-editor-default-apk-permissions-are-not-being-set-correctly">UUM-69911</a>)</p></li><li><p>Animation: Fixed an issue where entry transitions were not reporting warnings when one of their parameters was deleted.
  (<a href="https://issuetracker.unity3d.com/issues/deleting-a-parameter-in-an-animator-does-not-bring-up-a-warning-message-when-the-parameter-is-in-use-by-a-transition-from-the-entry-state">UUM-77622</a>)</p></li><li><p>Animation: Fixed crash when attempting to recreate the Animator bindings, by enabling a RigBuilder that binds a transform stream handle for example, while the Animator was being evaluated.
  (<a href="https://issuetracker.unity3d.com/issues/crash-on-unityengine-animation-setgenericfloatpropertyvalues-when-keyframing-the-rigbuilder-component-to-enabled-and-disabled">UUM-80043</a>)</p></li><li><p>Apple TV: Fixed Plugin Importer option Add To Embedded Binaries for AppleTV &amp; fat mach-o libs.
  (<a href="https://issuetracker.unity3d.com/issues/appletv-add-to-embedded-binaries-option-is-missing-in-the-plugin-importer">UUM-72637</a>)</p></li><li><p>Editor: Added a more descriptive error message if FileUtil::ReplaceDirectory() fails to delete the destination directory.
  (<a href="https://issuetracker.unity3d.com/issues/fileutil-dot-replacedirectory-throws-an-uninformative-error-when-the-destination-path-contains-a-locked-file">UUM-62633</a>)</p></li><li><p>Editor: F-key functionality restored, and menu items enable/disable correctly.
  (<a href="https://issuetracker.unity3d.com/issues/ubuntu-cant-type-the-letter-f">UUM-83883</a>)</p></li><li><p>Editor: Fixed an issue where Editor menus on macOS could render blank and cause the editor to hang.
  (<a href="https://issuetracker.unity3d.com/issues/mac-menu-sometimes-renders-empty-when-using-help">UUM-73279</a>)</p></li><li><p>Editor: Fixed crash in Linux when opening recent scenes from the File menu.
  (<a href="https://issuetracker.unity3d.com/issues/linux-crash-on-menucontroller-executemenuitem-when-selecting-recent-scene">UUM-82381</a>)</p></li><li><p>Editor: Fixed rendering issues with XRSettings.RenderViewportScale when using OpenXR.
  (<a href="https://issuetracker.unity3d.com/issues/urp-openxr-xrsettings-dot-renderviewportscale-with-urp-give-incorrect-results-when-the-value-is-less-than-1">UUM-19440</a>)</p></li><li><p>Editor: Fixed safeArea reported value for bottom part of the screen for iOS &lt; 15.
  (<a href="https://issuetracker.unity3d.com/issues/ios-the-safe-area-value-changes-when-reopening-the-app-in-landscape-orientation">UUM-51667</a>)</p></li><li><p>Editor: Fixed TLS Allocator errors logged when creating new project with 3D template and Connect to Unity Cloud enabled.
  (<a href="https://issuetracker.unity3d.com/issues/console-error-tls-allocator-alloc-temp-tls-underlying-allocator-alloc-temp-main-has-unfreed-allocations-size-37-with-warnings-and-messages-is-thrown-when-opening-a-new-project-for-the-first-time">UUM-61109</a>)</p></li><li><p>Editor: Linux Editor no longer crashes when creating a prefab variant from the context menu in a read-only directory.
  (<a href="https://issuetracker.unity3d.com/issues/linux-crash-on-createvariant-when-a-prefab-variant-is-created-in-the-packages-folder">UUM-76157</a>)</p></li><li><p>Editor: SRP Batcher supports Integer type "stencil ref".
  (<a href="https://issuetracker.unity3d.com/issues/when-the-type-of-the-stencil-ref-property-in-the-shader-is-an-integer-srp-batching-is-not-broken-even-if-the-stencil-ref-values-differ">UUM-79305</a>)</p></li><li><p>Editor: Switched to using more specific keys for caching splash screens rather than clearing the splash screen cache on all changes. Clearing out the splash screen hash could cause race conditions that would fail a build. If splash screens are not being cached properly you can clear out the cache before a build by deleting the SplashScreenCache folder in the Library.
  (<a href="https://issuetracker.unity3d.com/issues/android-entities-build-fails-with-the-error-asset-has-disappeared-while-building-player-to-globalgamemanagers-dot-assets-path-instancedid-xxxxxx-when-building">UUM-41830</a>)</p></li><li><p>Graphics: Fixed an issue when setting up BoneWeight with its own cached data.
  (<a href="https://issuetracker.unity3d.com/issues/mesh-dot-setboneweights-failed-vertex-vertex-number-has-zero-weights-is-being-logged-in-the-player-dot-log-file-when-the-project-is-played-with-build-and-run-and-development-build-toggled-off">UUM-56490</a>)</p></li><li><p>Graphics: Fixed issue in which raw Image that uses a Material with a custom Shader is invisible in Canvas when "Screen Space - Overlay" is set and the Player is in "Windowed" mode.
  (<a href="https://issuetracker.unity3d.com/issues/raw-image-that-uses-a-material-with-a-custom-shader-is-invisible-in-canvas-when-screen-space-overlay-is-set-and-the-player-is-in-windowed-mode">UUM-73042</a>)</p></li><li><p>Graphics: Fixed mesh memory being incorrectly reported in the memory profiler.
  (<a href="https://issuetracker.unity3d.com/issues/profiler-mesh-memory-remains-accounted-after-disposal-when-using-mesh-api">UUM-20120</a>)</p></li><li><p>HDRP: Fixed sun flicker where the sun is close to cloud boundaries.
  (<a href="https://issuetracker.unity3d.com/issues/directional-lights-flicker-when-placed-at-the-edge-of-a-volumetric-cloud">UUM-70628</a>)</p></li><li><p>IL2CPP: Fixed crash when attaching debugger due to invalid version number.
  (UUM-82249)</p></li><li><p>IL2CPP: Fixed issue with the wrong calling convention being used on function pointers when two function pointers with the same signature only differed by calling convention.</p></li><li><p>iOS: Fixed logging when using "Wait for the executable to be launched".
  (<a href="https://issuetracker.unity3d.com/issues/ios-logging-does-not-work-when-using-wait-for-the-executable-to-be-launched">UUM-78223</a>)</p></li><li><p>iOS: Fixed occasional hang on some devices when tweaking autorotation.
  (<a href="https://issuetracker.unity3d.com/issues/ios-player-freezes-with-a-warning-a-new-orientation-transaction-token-is-being-requested-while-a-valid-one-already-exists-when-orientation-is-changed-during-runtime-on-a-specific-devices">UUM-75124</a>)</p></li><li><p>iOS: Fixed Unity launching in background on background app activation.
  (UUM-82451)</p></li><li><p>Linux: Fixed Linux New Input System (Editor and Runtime) not detecting certain keys in Non-US Layouts.
  (<a href="https://issuetracker.unity3d.com/issues/linux-input-system-does-not-register-some-keys-when-using-international-keyboard-layouts">UUM-73613</a>)</p></li><li><p>Linux: Fixed Subsequent code executes after a crash.
  (<a href="https://issuetracker.unity3d.com/issues/linux-subsequent-code-executes-after-a-crash">UUM-77356</a>)</p></li><li><p>macOS: Fixed player not re-launching when doing Build &amp; Run when the application is already running.
  (<a href="https://issuetracker.unity3d.com/issues/macos-player-doesnt-relaunch-when-doing-build-and-run-few-times-in-a-row-without-closing-player">UUM-75604</a>)</p></li><li><p>Mono: Fixed JIT trampoline memory leak with Timers and Sockets.
  (<a href="https://issuetracker.unity3d.com/issues/memory-leak-when-using-net-sockets">UUM-76306</a>)</p></li><li><p>Package: Bump the version of LIH to fully delete an empty file. This fixes an issue where automated tests that consume LIH are unstable.</p></li><li><p>Particles: Crash with Render triggered from OnEnable.
  (<a href="https://issuetracker.unity3d.com/issues/crash-on-particlesystemrenderer-updatevertexinputlayout-when-copying-and-pasting-a-prefab-containing-a-specific-particle-system">UUM-74045</a>)</p></li><li><p>Particles: Fixed potential unbounded memory and excessive work when using Ring Buffer mode.
  (<a href="https://issuetracker.unity3d.com/issues/particle-system-allocates-large-amounts-of-memory-when-it-is-very-far-away-from-the-origin-of-the-scene">UUM-72277</a>)</p></li><li><p>Physics 2D: Fixed an issue where setting the Rigidbody2D.rotation when interpolation is being used results in the wrong Rigidbody2D.position being used for the interpolation resulting in movement discontinuities.
  (<a href="https://issuetracker.unity3d.com/issues/rigidbody2d-dot-setrotation-breaks-interpolation-when-resetting-rotation-with-interpolation-enabled">UUM-80058</a>)</p></li><li><p>Physics 2D: When using Rigidbody2D interpolation and changing the Transform directly, the Transform pose has the priority for interpolation whereas when changing the Rigidbody2D pose directly, the Rigidbody2D pose has the priority over the Transform. This stops "jitter" issues when driving the Rigidbody2D constantly via the Transform. This still isn't a recommended practice however.
  (<a href="https://issuetracker.unity3d.com/issues/2d-physics-makes-object-movements-to-flicker">UUM-82789</a>)</p></li><li><p>Player: Fixed a corner case crash bug on server build player shutdown.
  (<a href="https://issuetracker.unity3d.com/issues/windows-native-crash-occurs-when-closing-the-player-console-window">UUM-61775</a>)</p></li><li><p>Shadergraph: Added issue where precision mismatch could result in an asset failing to import.
  (<a href="https://issuetracker.unity3d.com/issues/invalidoperationexception-precision-mismatch-error-is-thrown-in-the-console-when-multiplying-two-half-precision-values-in-a-multiply-node-with-single-precision-in-shader-graph">UUM-74920</a>)</p></li><li><p>uGUI: Fixed bug where Anchor foldout in RectTransform doesn't get keyboard focus.
  (<a href="https://issuetracker.unity3d.com/issues/field-names-under-anchors-in-the-recttransform-component-dont-get-focused-when-tabbing-through-the-fields">UUM-71130</a>)</p></li><li><p>Universal RP: Disabled depth priming for cameras with depth only render targets.
  (<a href="https://issuetracker.unity3d.com/issues/no-depth-output-in-play-mode-with-camera-dot-render-when-both-ssao-and-depth-priming-are-enabled">UUM-65523</a>)</p></li><li><p>Universal RP: Fixed multiview support for the XR Occlusion Mesh pass.</p></li><li><p>Version Control: Fixed token renewal issue: Can't obtain a new token (Message: Invalid Refresh Token., Code: 132.104).</p></li></ul><h4 id="package-changes-in-2021345f1">Package changes in 2021.3.45f1</h4><h4 id="packages-updated">Packages updated</h4><ul><li><p>com.unity.burst: <a href="https://docs.unity3d.com/Packages/com.unity.burst@1.8//changelog/CHANGELOG.html">1.8.17</a> to <a href="https://docs.unity3d.com/Packages/com.unity.burst@1.8//changelog/CHANGELOG.html">1.8.18</a></p></li><li><p>com.unity.collab-proxy: <a href="https://docs.unity3d.com/Packages/com.unity.collab-proxy@2.5//changelog/CHANGELOG.html">2.5.1</a> to <a href="https://docs.unity3d.com/Packages/com.unity.collab-proxy@2.5//changelog/CHANGELOG.html">2.5.2</a></p></li><li><p>com.unity.services.analytics: <a href="https://docs.unity3d.com/Packages/com.unity.services.analytics@5.0//changelog/CHANGELOG.html">5.0.0</a> to <a href="https://docs.unity3d.com/Packages/com.unity.services.analytics@6.0//changelog/CHANGELOG.html">6.0.2</a></p></li><li><p>com.unity.xr.legacyinputhelpers: <a href="https://docs.unity3d.com/Packages/com.unity.xr.legacyinputhelpers@2.1//changelog/CHANGELOG.html">2.1.10</a> to <a href="https://docs.unity3d.com/Packages/com.unity.xr.legacyinputhelpers@2.1//changelog/CHANGELOG.html">2.1.11</a></p></li><li><p>com.unity.xr.management: <a href="https://docs.unity3d.com/Packages/com.unity.xr.management@4.4//changelog/CHANGELOG.html">4.4.0</a> to <a href="https://docs.unity3d.com/Packages/com.unity.xr.management@4.5//changelog/CHANGELOG.html">4.5.0</a></p></li><li><p>com.unity.xr.oculus: <a href="https://docs.unity3d.com/Packages/com.unity.xr.oculus@3.4//changelog/CHANGELOG.html">3.4.0</a> to <a href="https://docs.unity3d.com/Packages/com.unity.xr.oculus@3.4//changelog/CHANGELOG.html">3.4.1</a></p></li><li><p>com.unity.xr.openxr: <a href="https://docs.unity3d.com/Packages/com.unity.xr.openxr@1.12//changelog/CHANGELOG.html">1.12.0</a> to <a href="https://docs.unity3d.com/Packages/com.unity.xr.openxr@1.13//changelog/CHANGELOG.html">1.13.0</a></p></li><li><p>com.unity.services.apis: <a href="https://docs.unity3d.com/Packages/com.unity.services.apis@1.0//changelog/CHANGELOG.html">1.0.1</a> to <a href="https://docs.unity3d.com/Packages/com.unity.services.apis@1.1//changelog/CHANGELOG.html">1.1.0</a></p></li><li><p>com.unity.microsoft.gdk: <a href="https://docs.unity3d.com/Packages/com.unity.microsoft.gdk@1.1//changelog/CHANGELOG.html">1.1.0</a> to <a href="https://docs.unity3d.com/Packages/com.unity.microsoft.gdk@1.2//changelog/CHANGELOG.html">1.2.3</a></p></li><li><p>com.unity.microsoft.gdk.tools: <a href="https://docs.unity3d.com/Packages/com.unity.microsoft.gdk.tools@1.1//changelog/CHANGELOG.html">1.1.0</a> to <a href="https://docs.unity3d.com/Packages/com.unity.microsoft.gdk.tools@1.2//changelog/CHANGELOG.html">1.2.3</a></p></li></ul>